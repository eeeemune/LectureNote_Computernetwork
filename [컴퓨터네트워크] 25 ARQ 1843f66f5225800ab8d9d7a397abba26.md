# [컴퓨터네트워크] 25. ARQ

<aside>

# 💖 ARQ

</aside>

## ARQ란 무엇인가요?

전송된 정보에 문제가 있다면 **자동으로 재전송을 요구**하는 request.

<aside>

**Automatic Repeat reQuest** 

</aside>

## ARQ가 필요한 시나리오

![image.png](%5B%E1%84%8F%E1%85%A5%E1%86%B7%E1%84%91%E1%85%B2%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%84%90%E1%85%B3%E1%84%8B%E1%85%AF%E1%84%8F%E1%85%B3%5D%2025%20ARQ%201843f66f5225800ab8d9d7a397abba26/image.png)

1. 딸기 → 당근에게 data를 보낼 때, `channel` 이라는 매개체를 통해서 전송하게 됨
2. 이 때 channel에는 **noise가 낄 수밖에 없음**
3. 이러한 상황에서 noise를 없애기 위해?? **정보를 다시 보내게 됨**
    1. 당근이 이 정보를 **잘 받았는지 안 받았는지 feedback을 전달**해야 함
        1. 우리는 이미 그것을 배웠는데, ACK나 NAK이 그것임
            1. NAK: 잘 못 받았어용,,,
    2. 이를 **A**utomatic **R**epeat Re**q**uest, `ARQ`라고 부름.
4. ARQ를 실제로 구현하는 방법에는 여러가지가 있음

## ARQ는 어떻게 구현할 수 있나요?

### ⚡ Stop-and-wait

![image.png](%5B%E1%84%8F%E1%85%A5%E1%86%B7%E1%84%91%E1%85%B2%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%84%90%E1%85%B3%E1%84%8B%E1%85%AF%E1%84%8F%E1%85%B3%5D%2025%20ARQ%201843f66f5225800ab8d9d7a397abba26/image%201.png)

단순히, 정보를 전달한 후에 **상대로부터 ACK를 받았을 때만 다음 정보를 전송**하는 방식

- 만약 NAK를 받게 되었다면 정보를 다시 전송함

**단점**

시간이 엄청나게,,, 오래 걸림

| 장점 | 단점 |
| --- | --- |
| 쉽게 구현 가능함 | 대기 시간이 엄청나게,,, 오래 걸림 |

### ⚡ Go-back-N(GBN)

<aside>

**이 애니메이션을 이해하는 것이 중요하다고 말씀하심. ‘sliding’의 의미를 잘 생각해 보라고 하심. 이 부분만 알면 다른 부분은 알 필요 없다고까지 말씀하심…**

</aside>

![image.png](%5B%E1%84%8F%E1%85%A5%E1%86%B7%E1%84%91%E1%85%B2%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%84%90%E1%85%B3%E1%84%8B%E1%85%AF%E1%84%8F%E1%85%B3%5D%2025%20ARQ%201843f66f5225800ab8d9d7a397abba26/image%202.png)

![image.png](%5B%E1%84%8F%E1%85%A5%E1%86%B7%E1%84%91%E1%85%B2%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%84%90%E1%85%B3%E1%84%8B%E1%85%AF%E1%84%8F%E1%85%B3%5D%2025%20ARQ%201843f66f5225800ab8d9d7a397abba26/image%203.png)

![image.png](%5B%E1%84%8F%E1%85%A5%E1%86%B7%E1%84%91%E1%85%B2%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%84%90%E1%85%B3%E1%84%8B%E1%85%AF%E1%84%8F%E1%85%B3%5D%2025%20ARQ%201843f66f5225800ab8d9d7a397abba26/image%204.png)

일단 정보를 전부 보내 놓고, NAK return이 왔을 때 그 number부터 다시 보냄

- `sliding window` 라고도 함. **TCP에서 채택하는 ARQ 방식**임.
- `NAK` packet을 보냈다면 **그 number부터 다시 보냄**
    - 그 number만 다시 보내는 게 아니라, 그 number부터 쭉 다시 보냄 !! !!

<aside>

**Q. 4번부터 9번까지 전부 NAK인 이유는 무엇인가요?**

우리는 데이터를 **순차적으로** 전송받는 목표를 가지고 있습니다. 그래서 이전 packet이 손상되었다면 그 다음 packet도 제대로 처리되기 어려울 수밖에 없습니다.

</aside>

### ⚡ Selective-Repeat

어떤 부분에서 error가 났는지를 알고 그 packet만 다시 보냄

![image.png](%5B%E1%84%8F%E1%85%A5%E1%86%B7%E1%84%91%E1%85%B2%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%84%90%E1%85%B3%E1%84%8B%E1%85%AF%E1%84%8F%E1%85%B3%5D%2025%20ARQ%201843f66f5225800ab8d9d7a397abba26/image%205.png)

- Go-back-N은 NAK가 발생한 지점의 packet number를 함께 전송하지 않고도 구현할 수 있지만, Selective-Repeat은 그 packet number를 함께 전송해야만 함